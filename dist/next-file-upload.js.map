{"version":3,"sources":["next-file-upload.js"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"next-file-upload.js","sourcesContent":["(function() {\n  var global = global || this || window || Function('return this')();\n  var nx = global.nx || require('@feizheng/next-js-core2');\n  var DEFAULT_OPTIONS = { method: 'POST' };\n\n  nx.fileUpload = function(inUrl, inData, inOptions) {\n    var xhr = new XMLHttpRequest();\n    var formData = new FormData();\n    var options = nx.mix(DEFAULT_OPTIONS, inOptions);\n\n    //Build file ajax data:\n    nx.each(inData, function(key, item) {\n      formData.append(key, item);\n    });\n\n    // withCredentials\n    xhr.withCredentials = options.withCredentials || false;\n\n    //open data:\n    xhr.open(options.method, inUrl, true);\n\n    //set headers:\n    nx.each(options.headers, function(key, value) {\n      xhr.setRequestHeader(key, value);\n    });\n\n    //send\n    xhr.send(formData);\n\n    //response:\n    return new Promise(function(resolve, reject) {\n      //onload:\n      xhr.onload = function() {\n        if (xhr.status === 200) {\n          resolve(xhr.response);\n        } else {\n          reject(xhr);\n        }\n      };\n\n      // show progress:\n      // xhr.onprogress = function(inEvent) {\n      //   console.log(inEvent.loaded, inEvent.total);\n      // };\n\n      //error:\n      xhr.onerror = function() {\n        reject(xhr);\n      };\n    });\n  };\n\n  if (typeof module !== 'undefined' && module.exports) {\n    module.exports = nx.fileUpload;\n  }\n})();\n"]}